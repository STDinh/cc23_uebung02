variables:
    GREET: "Mundo"

stages:
    - info
    - test

docker:
    stage: info
    image: "bitnami/kubectl:1.18"
    script:
        - echo $DEPLOYMENT_SECRET
        - cat $KUBE_CONFIG > $(pwd)/.kube/config
        - kubectl info

java:
    stage: test
    image: "openjdk:14"
    script:
        - javac src/*.java
        - java -cp src/ Hello $GREET > result.txt
        - cat result.txt
        - cat result.txt | grep "Hello $GREET"

python:
    stage: test
    image: "python:3-slim"
    script:
        - python src/hello.py $GREET > result.txt
        - cat result.txt
        - cat result.txt | grep "Hello $GREET"
