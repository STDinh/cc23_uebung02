variables:
    GREET: "Mundo"
    K8S_NS: "my-funky-project"

stages:
    - info
    - shutdown

k8s:
    stage: info
    image: "lwolf/kubectl_deployer"
    script:
        - "kubectl create namespace $K8S_NS --kubeconfig=$KUBE_CONFIG || :"
        - kubectl get all --kubeconfig=$KUBE_CONFIG --namespace=$K8S_NS

shutdown:
    stage: shutdown
    image: lwolf/kubectl_deployer
    script:
        - kubectl delete all --all --namespace=$K8S_NS --kubeconfig=$KUBE_CONFIG
    when: manual
